b'Microsoft PowerPoint - Tut3.pptxCOMP 353 -DatabasesLast time\xe2\x80\xa6\xe2\x80\xa2Continued database modifications (DML)\xe2\x80\xa2 INSERT, DELETE, UPDATE\xe2\x80\xa2Database definition statements (DDL)\xe2\x80\xa2CREATE TABLE, ALTER TABLE, DROP TABLETiny pop quiz\xe2\x80\xa2How many tuples remain in Hero after the deletion?DELETE FROM Hero(name, gameTitle, class, level, hitPoints)WHERE Hero.level <= 1 OR Hero.class = \xe2\x80\x98Thief\xe2\x80\x99 OR Hero.name = \xe2\x80\x98Leon\xe2\x80\x99 ;name gameTitle class level hitPointsMario Super Mario 64 Plumber 4 1Link Legend of Zelda: Wind Waker Warrior 1 3Olimar Pikmin 2 Thief 2 100Kirby Kirby 64: The Crystal Shards Shapeshifter 5 50Leon Resident Evil 4 Gunner 3 200Luigi Luigi\xe2\x80\x99s Mansion Ghostbuster 0 5Louie Pikmin 2 Assistant 0 100Questions needing answers:\xe2\x80\xa2VARCHAR(n) exceeding n: depending on your strictness setting in SQL, either the value is truncated with a warning or the transaction is rejected\xe2\x80\xa2ALTER table to change column type: it can be done, but data can be lost and anything referring to that table may stop working as expectedALTER TABLE x ALTER COLUMN y NEW_DATA_TYPE; Today\xe2\x80\xa2Continue E/R diagrams\xe2\x80\xa2Start how to convert E/R diagram to Relational Model\xe2\x80\xa2Assignment-oriented practice problemCreating E/R diagramsInheritance in E/R\xe2\x80\xa2An entity has whatever attributes and relationships any of its components from an isa-hierarchy hasInheritance in E/R\xe2\x80\xa2One side of the triangle is attached to the subclass, and the opposite point is connected to the superclass. Every isa relationship is one-one, it\xe2\x80\x99s not necessary to draw the multiplicity arrows.\xe2\x80\xa2So an entity in the isahierarchy can either be a Game, or a BoardgameGame, the latter having the attributes from both setsWeak Entity/Relationship sets\xe2\x80\xa2The key of a weak entity set is formed from the linked strong entity\xe2\x80\x99s key plus the distinguishing features of the weak entity itselfWeak Entity vs Referential integrity\xe2\x80\xa2With referential integrity we are placing a constraint on the entries to the database: for a tuple to exist in the set Hero, it  must refer to some tuple in Game or else it cannot be in data\xe2\x80\xa2Expressed as a foreign key in SQL,the consistency of the DBMSprevents the deletion of a tuple in use as a foreign key (DELETE transaction fails if you try)Converting E/R diagram to relational database schema Relational model terminology\xe2\x80\xa2Relation schema:\xe2\x80\xa2 Relation name and a set of attribute names\xe2\x80\xa2 Hero = (name, gameTitle, class, level, hitPoints)\xe2\x80\xa2Relation instance :\xe2\x80\xa2The set of \xe2\x80\x9ccurrent\xe2\x80\x9d tuples\xe2\x80\xa2Database schema :\xe2\x80\xa2A set of relation schemas D = {Hero, Game, Player,\xe2\x80\xa6}\xe2\x80\xa2Database instance :\xe2\x80\xa2Many relation instances (tables) -- one per relation in the database schemaname gameTitle class level hitPointsMario Super Mario 64 Plumber 4 1Link Legend of Zelda: Wind Waker Warrior 1 3Converting entity sets\xe2\x80\xa2For each strong entity set create a relation with the same name and attributes\xe2\x80\xa2Game (title, platform, genre, releaseYear)\xe2\x80\xa2BoardGame (boardSize, numTokens)\xe2\x80\xa2SuperFanPlayer (username)Converting relationships\xe2\x80\xa2For each simple relationship set (not weak or isahierarchy relations yet), create a relation (table) with the same name, some of the key attribute(s) of each entity set involved in the relationship (depending on the multiplicity of the relation), and any attributes belonging to the relation in the first place.Converting relationships: finding the key\xe2\x80\xa2If R is a binary relationship between entity sets A and B, then the multiplicity of this relationship determines the key of R:\xe2\x80\xa2If R is M-M, then the keys of A and B together contribute to the key of R\xe2\x80\xa2If R is M-1 from A to B, then the key of A is part of the key of R\xe2\x80\xa2If R is 1-1, then choose either A or B (but not both) to contribute to the key of RPlays (title, releaseYear, username, hoursPerWeek)Converting weak entity sets and relations\xe2\x80\xa2The relation/table for the weak entity set W must include all the attributes of W as well as the key attributes of the strong entity set(s) to which W is associated. \xe2\x80\xa2This propagates into any other weak set that is weakly related to W\xe2\x80\xa2The weak relation (double diamond) from W to its strong set does not need its own table\xe2\x80\xa2Studios (name, address)\xe2\x80\xa2Crews (number, name)\xe2\x80\xa2Sub-Crews (number, crewNumber, name)Converting weak entity sets and relations\xe2\x80\xa2We can now define the relation for Hero :\xe2\x80\xa2Hero (name, title, releaseYear, class, level, hitPoints)Converting E/R to relational database schema \xe2\x80\xa2Good start on the relational schema, next week we will cover a few ways to convert the isa-hierarchy into relations\xe2\x80\xa2Hero (name, title, releaseYear, class, level, hitPoints)\xe2\x80\xa2Game (title, platform, genre, releaseYear)\xe2\x80\xa2BoardGame (boardSize, numTokens)\xe2\x80\xa2SuperFanPlayer (username)\xe2\x80\xa2Plays (title, releaseYear, username, hoursPerWeek)Practice problems\xe2\x80\xa2Draw an E/R diagram for a database according to the following scenario, then convert your E/R diagram into a relational database schema, including keys.\xe2\x80\xa2Consider an Employee relation with attributes including SIN, name, DOB (data of birth), and DID (the ID of the department in which she/he works). We also have the concepts of supervisor and subordinate which we wish to represent in the model. That is, each employee has a supervisor to whom she/he reports. Subordinate refers to an employee working under some supervisor. Convert this diagram into a relational database schema. For each entity or relationship set in the model (design), determine which attribute(s) form the key. Practice problemsPractice problems\xe2\x80\xa2Convert your E/R diagram from the previous question into a relational database schema, including keys.\xe2\x80\xa2Employee = (SIN, name, DOB, DID)\xe2\x80\xa2ReportsTo = (SupervisorSIN, SubordinateSIN)\xe2\x80\xa2These slides were made referencing the course slides from Prof Shiri, as well as the textbook: A First Course in Database Systems by Ullman and Widom, third editionGood book for practice problems and longer explanations'