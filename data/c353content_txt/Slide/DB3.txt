b'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMicrosoft PowerPoint - DB3.ppt [Compatibility Mode]\n\n\n1\n\nCOMP353 Databases\n\nRelational Data Model\n\nConceptual Database Design\n\nRelational Data Model:\n\nIntroduction\n\nThe Relational Data Model\n\n\xef\xbf\xbd Relational database\n\n\xef\xbf\xbd A set of relations\n\n\xef\xbf\xbd Relation\n\n\xef\xbf\xbd A two-dimensional table in which data is arranged \n\nExample: Relation\n\nTitle Year Length FilmType\n\nStar Wars 1997 124 color\n\nMighty Ducks 1991 104 color\n\nWayne\xe2\x80\x99s World 1992 95 color\n\n. . . . . . . . . . . .\n\nEach row \n\nis a tuple\nComponents of  the tuple\n\nAttribute Names\n\nAttributes (type) are atomic (1NF)\n\nRelational Data Model\n\n\xef\xbf\xbd Relation schema (or structure):  Ri={A1,\xe2\x80\xa6,Am} \n\n\xef\xbf\xbd Relation name + a set of attribute names (+ attribute types)\n\n\xef\xbf\xbd Relation instance:\n\n\xef\xbf\xbd The set of \xe2\x80\x9ccurrent\xe2\x80\x9d tuples\n\n\xef\xbf\xbd Database schema:\n\n\xef\xbf\xbd A set of relation schemas D={R1,\xe2\x80\xa6,Rn}\n\n\xef\xbf\xbd Database instance:\n\n\xef\xbf\xbd A collection of relation instances -- one for each relation in the \n\ndatabase schema\n\nRelational Query Languages\n\n\xef\xbf\xbd A major strength of the relational model is that it\n\nsupports a powerful, high-level programming \n\nlanguage \xe2\x80\x93 the Structured Query Language (SQL)\n\n\n\n2\n\nLogical Database Design\n\nFrom E/R to Relational Model\n\nConverting E/R to Relational Model\n\n\xef\xbf\xbd Input:\n\n\xef\xbf\xbd An E/R diagram\n\n\xef\xbf\xbd Output:\n\n\xef\xbf\xbd A relational database schema -- a collection of relations\n\nConverting Entity Sets to Relations\n\n\xef\xbf\xbd For each entity set E, create a corresponding relation with \nthe same attributes as in E\n\ncourseNumber name credits\n\nComp248 C++  Prog. 3\n\nComp352 Data Structures 4\n\nComp353 Databases 4\n\nEntity Set: Relation Instance: \n\nRelation Schema:\n\nIn theory, Courses = {courseNumber, name, credits}\nIn practice, Courses(courseNumber, name, credits)\n\ncourseNumber name\n\nCourses\n\ncredits\n\nConverting Entity Sets to Relations\n\nID firstName lastName GPA address\n\n111 Joe Smith 4.0 45 Pine av.\n\n222 Sue Brown 3.1 71 Main St.\n\n333 Ann John 3.7 39 Bay St. \n\nEntity Set: Relation Instance:\n\nRelation Schema:\n\nStudents(ID, firstName, lastName, GPA, address)\n\nGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\nConverting Entity Sets to Relations\n\nlength filmType\n\ntitle year\n\nMovies\n\ntitle year length filmType\n\nStar Wars 1997 124 color\n\nMighty Ducks 1991 104 color\n\nWayne\xe2\x80\x99s World 1992 95 b&w\n\nEntity Set: Relation Instance:\n\nRelation Schema:\n\nMovies(title, year, length, filmType)\n\nConverting Entity Sets to Relations\n\nEntity Set:\n\nname address\n\nStudios\n\nname address\n\nFox Hollywood\n\nDisney Hollywood \n\nParamount Hollywood\n\nRelation Instance:\n\nRelation Schema:\n\nStudios(name, address)\n\n\n\n3\n\nConverting Relationships to Tables\n\n\xef\xbf\xbd For each relationship set R, create the corresponding table (relation) \n\nand determine its attributes.\n\n\xef\xbf\xbd The set of attributes of this table includes:\n\n\xef\xbf\xbd \xe2\x80\x9cImplicitly\xe2\x80\x9d: Key attribute(s) of the entity sets involved in the relationship R\n\n\xef\xbf\xbd \xe2\x80\x9cExplicitly\xe2\x80\x9d: every attribute used \xe2\x80\x9dexplicitly\xe2\x80\x9d in R\n\nFrom Relationships to Tables\n\nID courseNumber grade\n\n123 Comp248 A-\n\n456 Comp248 B\n\n123 Comp353 A+\n\nRelationship Set:\n\nRelation Instance:\n\nRelation Schema:\n\nEnrolledIn (ID, courseNumber, grade)\n\nWhat is the primary key of this relation?\n\nEnrolledIn\n\ncourseNumber name\n\nCourses\n\ncreditsGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\ngrade\n\nFrom Relationships to Tables\n\ncourseNumber DID\n\nComp248 1\n\nComp352 1\n\nMath207 9\n\nRelationship Set:\n\nRelation Instance:\n\nRelation Schema:\n\nGivenBy(courseNumber, DID)\n\nWhat is the primary key of this relation?\n\nGivenBy\n\nDID name\n\nDepartments\n\naddress\n\ncourseNumber name\n\nCourses\n\ncredits\n\nFrom Relationships to Tables\n\nPID DID\n\n234 1\n\n451 2\n\n778 9\n\nRelationship Set:\n\nRelation Instance:\n\nRelation Schema:\n\nChair(PID, DID)\n\nWhat is the primary key of this relation?\n\nChair\n\nID name\n\nDepartments\n\naddress\nresearchArea address\n\nID\n\nfirstName\n\nProfessors\n\nlastName\n\nIdentifying Key of Relationship R\n\n\xef\xbf\xbd We are already familiar with the concept of key\n\n\xef\xbf\xbd If R is a binary relationship between entity sets E1 and E2, then the \nmultiplicity of this relationship determines the key of R\n\xef\xbf\xbd If  R is M-N, then the keys of E1 and E2 together are \xe2\x80\x9cpart of\xe2\x80\x9d the key of R\n\n\xef\xbf\xbd If R is M-1 from E1 to E2, then the key of E1 is part of the key of R\n\n\xef\xbf\xbd If R is 1-1, then either E1 or E2 (but not both) is part of the key of R\n\n\xef\xbf\xbd Do the above rules regarding the formation of keys apply to:\n\xef\xbf\xbd Multi-way relationships?\n\n\xef\xbf\xbd How to determine keys for:\n\xef\xbf\xbd Week entity sets?\n\n\xef\xbf\xbd Entity sets and relationship sets in isa hierarchies?\n\nConverting Relationships to Tables\n\n\xef\xbf\xbd We should rename the attributes in the relations created \n\nwhen:\n\n\xef\xbf\xbd An entity set is involved in a relationship more than once \n\n\xef\xbf\xbd The same attribute name appears in the keys of different entity \n\nsets involved in the relationship (e.g., ID in previous example)\n\n\xef\xbf\xbd This is to avoid ambiguity in the schema and to be more clear \n\nin meanings\n\n\n\n4\n\nRelationship Sets to Relations\n\nRelationship Set:\n\nRelation Schema:\n\nContracts(starName, title, year, studioOfStar, producingStudio, salary )\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nStudio\n\nof star\nProducing \n\nstudio\n\nWhat is the primary key for Contracts?\n\nsalary\n\nWeak Entity Sets to Relations\n\n\xef\xbf\xbd The relation/table W for the weak entity setW, must \ninclude all the attributes ofW as well as the key attributes \nof the strong entity sets to whichW is associated.\n\n\xef\xbf\xbd Any relationship R to which the weak entity setW\ncontributes, must include all the key attributes of W, i.e., \nthe key attributes of every entity set that contributes to \nW\xe2\x80\x99\xe2\x80\x99s key\n\n\xef\xbf\xbd The weak relationships, from the weak entity setW to \nother entity sets that provide the key forW, need not be \nconverted into a separate table, i.e., double diamonds \nconnecting a weak entity set need not become a separate \ntable.\n\nWeak Entity Sets to Relations\n\nWeak Entity Set:\n\nRelation Schema:\n\nCrews (number, name) \n\nUnit-of (number, studioName, name)\n\nStudios (name, address)\n\nnumber\n\nCrews Unit-of\n\nname address\n\nStudios\n\nDo we need to keep the \n\nrelation Unit-of?\n\nWeak Entity Sets to Relations\n\nWeak Entity Set:\n\nRelation Schemas:\n\nSub-Crews (number,crewNumber, name)\n\nnumber\n\nSub-Crews Part-of\n\nnumber name address\n\nStudiosCrews Unit-of\n\nStudios (name, address)                         \n\nWeak Entity Sets to Relations\n\nWeak Entity Set:\n\nRelation Schema:\n\nContracts(starName, title, year, studioOfStar, producingStudio,salary)\n\nlength filmType\n\ntitle year\n\nMovies name address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nMovie-of\n\nProducing \nstudio\n\nStudio\n\nof star\n\nStar-of\n\nWhat is the key for Contracts?\n\nsalary\n\nConverting isa-Hierarchies to Relations\n\nThere are 3 approaches:\n\n\xef\xbf\xbd Straight-E/R style method\n\n\xef\xbf\xbd In the E/R model, an entity (object) can be represented by \n\nentities that may belong to several entity sets, which are \n\nconnected and related via isa hierarchies\n\n\xef\xbf\xbd The \xe2\x80\x9cconnected\xe2\x80\x9d entities together represent the object and also \n\ndetermine the object\xe2\x80\x99s properties (e.g., attributes and \n\nrelationships)\n\n\xef\xbf\xbd The object-oriented method\n\n\xef\xbf\xbd The nulls method\n\n\n\n5\n\nConverting isa-Hierarchy to Relations\n\n\xef\xbf\xbd For each entity set E, create a relation (table) e, and give it  \n\nattribute(s) A, whenever:\n\n\xef\xbf\xbd A belongs to E \n\n\xef\xbf\xbd A is the key attribute of the parent(s) relation\n\n\xef\xbf\xbd No relation is created for the isa-relationship\n\nIsa-Hierarchy to Relations\n\nIsa-hierarchy:\n\nRelation Schemas: Students (ID, lastName, firstName, GPA, address )\n\nGradStudents (ID, option )\n\nSupervisedBy (StudentID, professorID)\n\nSupervisedBy\n\nisa\n\nGradStudents\n\nto Professor\n\noption\nmajor\n\nUgradStudents\n\nisa\nGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\nUgradStudents (ID, major )\n\nIsa-Hierarchy to Relations\n\nRelation Schemas:\n\nVoices (starName, title, year)\n\nlength filmType\n\ntitle year\n\nMovies\n\nweapon\n\nMurder-\n\nMysteries\n\nisa\n\nVoices\n\nisa\n\nCartoons\n\nto Stars\n\nMovies (title, year, length, film Type)\n\nCartoons (title, year)\n\nMurder-Mysteries (title, year, weapon)\n\n\xef\xbf\xbd\xef\xbf\xbd\xef\xbf\xbd\xef\xbf\xbd Do we really need this?\nWhat about \n\nCartoon-Murder-Mysteries?\n\nThe NULL Values Approach\n\n\xef\xbf\xbd If we are allowed to use NULL as a value in tuples, we can \nhandle a hierarchy of entity sets (classes) with a single \nrelation\n\n\xef\xbf\xbd This relation has all the attributes belonging to any entity set (class) \nof the hierarchy. \n\n\xef\xbf\xbd An entity/object is represented by a single tuple that has NULL in \neach attribute that is not defined for that entity/object.\n\nConverting isa Hierarchy to Relations: \n\nThe Null Approach\n\nisa hierarchy:\n\nRelation Schemas:\n\nStudent (ID, lastName, firstName, GPA, address, option, major)\n\nSupervisedBy (ID, professorID)     \n\nSupervisedBy\n\nisa\n\nGradStudents\n\nto Professor\n\noption\nmajor\n\nUgradStudents\n\nisa\nGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\nNULL Approach\n\n\xef\xbf\xbd The null approach: supports efficient query processing but is \ninefficient in space utilization. Why?\n\n\xef\xbf\xbd Answering queries: the nulls approach allows us to find, in a single \nrelation R, every tuple/object from any set involved in the hierarchy \n\n\xef\xbf\xbd Allows us to find all the information about an entity/object in a \nsingle tuple in R\n\n\xef\xbf\xbd The down side is its space utilization which is too costly for having \nrepeated and redundant information:\n\n\xef\xbf\xbd Note: Nulls are not allowed in the relational model theory, \nbut practically, it is supported by commercial DBMS\n\n\n\n6\n\nA quick test!\n\n\xef\xbf\xbd Suppose R is a M-1 relationship from entity set \n\nE1={a1,a2} to E2={b1,b2}. Which of the following is \n\nNOT a valid instance of R?\n\n\xef\xbf\xbd R = {(a1, b1), (a1, b2)}.\n\n\xef\xbf\xbd R = {(a1, b1)}.\n\n\xef\xbf\xbd R = {(a2, b1)}.\n\n\xef\xbf\xbd R = {(a1, b1), (a2, b1)}.\n\n\xef\xbf\xbd R = { }\n\n\n'