b'Microsoft PowerPoint - DB3.ppt [Compatibility Mode]1COMP353 DatabasesRelational Data ModelConceptual Database DesignRelational Data Model:IntroductionThe Relational Data Model\xef\xbf\xbd Relational database\xef\xbf\xbd A set of relations\xef\xbf\xbd Relation\xef\xbf\xbd A two-dimensional table in which data is arranged Example: RelationTitle Year Length FilmTypeStar Wars 1997 124 colorMighty Ducks 1991 104 colorWayne\xe2\x80\x99s World 1992 95 color. . . . . . . . . . . .Each row is a tupleComponents of  the tupleAttribute NamesAttributes (type) are atomic (1NF)Relational Data Model\xef\xbf\xbd Relation schema (or structure):  Ri={A1,\xe2\x80\xa6,Am} \xef\xbf\xbd Relation name + a set of attribute names (+ attribute types)\xef\xbf\xbd Relation instance:\xef\xbf\xbd The set of \xe2\x80\x9ccurrent\xe2\x80\x9d tuples\xef\xbf\xbd Database schema:\xef\xbf\xbd A set of relation schemas D={R1,\xe2\x80\xa6,Rn}\xef\xbf\xbd Database instance:\xef\xbf\xbd A collection of relation instances -- one for each relation in the database schemaRelational Query Languages\xef\xbf\xbd A major strength of the relational model is that itsupports a powerful, high-level programming language \xe2\x80\x93 the Structured Query Language (SQL)2Logical Database DesignFrom E/R to Relational ModelConverting E/R to Relational Model\xef\xbf\xbd Input:\xef\xbf\xbd An E/R diagram\xef\xbf\xbd Output:\xef\xbf\xbd A relational database schema -- a collection of relationsConverting Entity Sets to Relations\xef\xbf\xbd For each entity set E, create a corresponding relation with the same attributes as in EcourseNumber name creditsComp248 C++  Prog. 3Comp352 Data Structures 4Comp353 Databases 4Entity Set: Relation Instance: Relation Schema:In theory, Courses = {courseNumber, name, credits}In practice, Courses(courseNumber, name, credits)courseNumber nameCoursescreditsConverting Entity Sets to RelationsID firstName lastName GPA address111 Joe Smith 4.0 45 Pine av.222 Sue Brown 3.1 71 Main St.333 Ann John 3.7 39 Bay St. Entity Set: Relation Instance:Relation Schema:Students(ID, firstName, lastName, GPA, address)GPA addressIDfirstNameStudentslastNameConverting Entity Sets to Relationslength filmTypetitle yearMoviestitle year length filmTypeStar Wars 1997 124 colorMighty Ducks 1991 104 colorWayne\xe2\x80\x99s World 1992 95 b&wEntity Set: Relation Instance:Relation Schema:Movies(title, year, length, filmType)Converting Entity Sets to RelationsEntity Set:name addressStudiosname addressFox HollywoodDisney Hollywood Paramount HollywoodRelation Instance:Relation Schema:Studios(name, address)3Converting Relationships to Tables\xef\xbf\xbd For each relationship set R, create the corresponding table (relation) and determine its attributes.\xef\xbf\xbd The set of attributes of this table includes:\xef\xbf\xbd \xe2\x80\x9cImplicitly\xe2\x80\x9d: Key attribute(s) of the entity sets involved in the relationship R\xef\xbf\xbd \xe2\x80\x9cExplicitly\xe2\x80\x9d: every attribute used \xe2\x80\x9dexplicitly\xe2\x80\x9d in RFrom Relationships to TablesID courseNumber grade123 Comp248 A-456 Comp248 B123 Comp353 A+Relationship Set:Relation Instance:Relation Schema:EnrolledIn (ID, courseNumber, grade)What is the primary key of this relation?EnrolledIncourseNumber nameCoursescreditsGPA addressIDfirstNameStudentslastNamegradeFrom Relationships to TablescourseNumber DIDComp248 1Comp352 1Math207 9Relationship Set:Relation Instance:Relation Schema:GivenBy(courseNumber, DID)What is the primary key of this relation?GivenByDID nameDepartmentsaddresscourseNumber nameCoursescreditsFrom Relationships to TablesPID DID234 1451 2778 9Relationship Set:Relation Instance:Relation Schema:Chair(PID, DID)What is the primary key of this relation?ChairID nameDepartmentsaddressresearchArea addressIDfirstNameProfessorslastNameIdentifying Key of Relationship R\xef\xbf\xbd We are already familiar with the concept of key\xef\xbf\xbd If R is a binary relationship between entity sets E1 and E2, then the multiplicity of this relationship determines the key of R\xef\xbf\xbd If  R is M-N, then the keys of E1 and E2 together are \xe2\x80\x9cpart of\xe2\x80\x9d the key of R\xef\xbf\xbd If R is M-1 from E1 to E2, then the key of E1 is part of the key of R\xef\xbf\xbd If R is 1-1, then either E1 or E2 (but not both) is part of the key of R\xef\xbf\xbd Do the above rules regarding the formation of keys apply to:\xef\xbf\xbd Multi-way relationships?\xef\xbf\xbd How to determine keys for:\xef\xbf\xbd Week entity sets?\xef\xbf\xbd Entity sets and relationship sets in isa hierarchies?Converting Relationships to Tables\xef\xbf\xbd We should rename the attributes in the relations created when:\xef\xbf\xbd An entity set is involved in a relationship more than once \xef\xbf\xbd The same attribute name appears in the keys of different entity sets involved in the relationship (e.g., ID in previous example)\xef\xbf\xbd This is to avoid ambiguity in the schema and to be more clear in meanings4Relationship Sets to RelationsRelationship Set:Relation Schema:Contracts(starName, title, year, studioOfStar, producingStudio, salary )length filmTypetitle yearMoviesname addressStarsname addressStudiosContractsStudioof starProducing studioWhat is the primary key for Contracts?salaryWeak Entity Sets to Relations\xef\xbf\xbd The relation/table W for the weak entity setW, must include all the attributes ofW as well as the key attributes of the strong entity sets to whichW is associated.\xef\xbf\xbd Any relationship R to which the weak entity setWcontributes, must include all the key attributes of W, i.e., the key attributes of every entity set that contributes to W\xe2\x80\x99\xe2\x80\x99s key\xef\xbf\xbd The weak relationships, from the weak entity setW to other entity sets that provide the key forW, need not be converted into a separate table, i.e., double diamonds connecting a weak entity set need not become a separate table.Weak Entity Sets to RelationsWeak Entity Set:Relation Schema:Crews (number, name) Unit-of (number, studioName, name)Studios (name, address)numberCrews Unit-ofname addressStudiosDo we need to keep the relation Unit-of?Weak Entity Sets to RelationsWeak Entity Set:Relation Schemas:Sub-Crews (number,crewNumber, name)numberSub-Crews Part-ofnumber name addressStudiosCrews Unit-ofStudios (name, address)                         Weak Entity Sets to RelationsWeak Entity Set:Relation Schema:Contracts(starName, title, year, studioOfStar, producingStudio,salary)length filmTypetitle yearMovies name addressStarsname addressStudiosContractsMovie-ofProducing studioStudioof starStar-ofWhat is the key for Contracts?salaryConverting isa-Hierarchies to RelationsThere are 3 approaches:\xef\xbf\xbd Straight-E/R style method\xef\xbf\xbd In the E/R model, an entity (object) can be represented by entities that may belong to several entity sets, which are connected and related via isa hierarchies\xef\xbf\xbd The \xe2\x80\x9cconnected\xe2\x80\x9d entities together represent the object and also determine the object\xe2\x80\x99s properties (e.g., attributes and relationships)\xef\xbf\xbd The object-oriented method\xef\xbf\xbd The nulls method5Converting isa-Hierarchy to Relations\xef\xbf\xbd For each entity set E, create a relation (table) e, and give it  attribute(s) A, whenever:\xef\xbf\xbd A belongs to E \xef\xbf\xbd A is the key attribute of the parent(s) relation\xef\xbf\xbd No relation is created for the isa-relationshipIsa-Hierarchy to RelationsIsa-hierarchy:Relation Schemas: Students (ID, lastName, firstName, GPA, address )GradStudents (ID, option )SupervisedBy (StudentID, professorID)SupervisedByisaGradStudentsto ProfessoroptionmajorUgradStudentsisaGPA addressIDfirstNameStudentslastNameUgradStudents (ID, major )Isa-Hierarchy to RelationsRelation Schemas:Voices (starName, title, year)length filmTypetitle yearMoviesweaponMurder-MysteriesisaVoicesisaCartoonsto StarsMovies (title, year, length, film Type)Cartoons (title, year)Murder-Mysteries (title, year, weapon)\xef\xbf\xbd\xef\xbf\xbd\xef\xbf\xbd\xef\xbf\xbd Do we really need this?What about Cartoon-Murder-Mysteries?The NULL Values Approach\xef\xbf\xbd If we are allowed to use NULL as a value in tuples, we can handle a hierarchy of entity sets (classes) with a single relation\xef\xbf\xbd This relation has all the attributes belonging to any entity set (class) of the hierarchy. \xef\xbf\xbd An entity/object is represented by a single tuple that has NULL in each attribute that is not defined for that entity/object.Converting isa Hierarchy to Relations: The Null Approachisa hierarchy:Relation Schemas:Student (ID, lastName, firstName, GPA, address, option, major)SupervisedBy (ID, professorID)     SupervisedByisaGradStudentsto ProfessoroptionmajorUgradStudentsisaGPA addressIDfirstNameStudentslastNameNULL Approach\xef\xbf\xbd The null approach: supports efficient query processing but is inefficient in space utilization. Why?\xef\xbf\xbd Answering queries: the nulls approach allows us to find, in a single relation R, every tuple/object from any set involved in the hierarchy \xef\xbf\xbd Allows us to find all the information about an entity/object in a single tuple in R\xef\xbf\xbd The down side is its space utilization which is too costly for having repeated and redundant information:\xef\xbf\xbd Note: Nulls are not allowed in the relational model theory, but practically, it is supported by commercial DBMS6A quick test!\xef\xbf\xbd Suppose R is a M-1 relationship from entity set E1={a1,a2} to E2={b1,b2}. Which of the following is NOT a valid instance of R?\xef\xbf\xbd R = {(a1, b1), (a1, b2)}.\xef\xbf\xbd R = {(a1, b1)}.\xef\xbf\xbd R = {(a2, b1)}.\xef\xbf\xbd R = {(a1, b1), (a2, b1)}.\xef\xbf\xbd R = { }'