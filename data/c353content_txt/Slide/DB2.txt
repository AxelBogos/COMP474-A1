b'Microsoft PowerPoint - DB2.ppt [Compatibility Mode]1Conceptual Database DesignEntity/Relationship (E/R)  Model1Database Design\xef\xbf\xbd Requirements collection and analysis\xef\xbf\xbd Determine what information the database must hold\xef\xbf\xbd Determine the relationships among the components of that information\xef\xbf\xbdConceptual database design using some data model\xef\xbf\xbd A data model is a collection of concepts for describing:1. data and relationships among data 2. data semantics and constraints2Design Approaches & Notations\xef\xbf\xbd Entity-Relationship Model (E/R) \xef\xbf\xbd Object-Oriented  (e.g., Object Definition Language -- ODL)\xef\xbf\xbd Semi-structured data (e.g., XML)Ideas E/R RelationsRelationalDBMSA Design Process3Entity-Relationship (E/R) Model \xef\xbf\xbd E/R model (Chen 1976) is a graphicallanguage/notation to present a database model\xef\xbf\xbd It grew out of modeling applications\xef\xbf\xbd Widely used in conceptual database design\xef\xbf\xbd No single standard for the E/R language/notation4Entity-Relationship (E/R) Model\xef\xbf\xbd Collection of abstraction / modeling primitivesEntity setRelationship setAttribute isaInheritanceMultiplicity of relationshipsWeak entity setReferential integrityWeak relationship set5Entities and entity sets\xef\xbf\xbd Entity \xe2\x80\x93 A real world object that is \xe2\x80\x9cdistinguishable\xe2\x80\x9d from other objects\xef\xbf\xbd Entity Set -- A collection of similar entities\xef\xbf\xbd All entities in an entity set have the same set of attributes\xef\xbf\xbd In ODL:\xef\xbf\xbd Object corresponds to entity\xef\xbf\xbd Class corresponds to entity setGPA addressIDfirstNameStudentslastName courseNumber nameCoursescredits 62Entities and entity setslength filmTypetitle yearMoviesname addressStars7Relationships and Relationship Sets\xef\xbf\xbd Relationships are association among entities  \xef\xbf\xbd Relationship set is a set of relationships of the same type\xef\xbf\xbd If E1, . . ., En are entity sets, a relationship R on these sets is defined as:  R \xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86 E1 \xc3\x97\xc3\x97\xc3\x97\xc3\x97 . . . \xc3\x97\xc3\x97\xc3\x97\xc3\x97 En\xe2\x80\xa2 In general, relationships are n-ary, where n \xe2\x89\xa5\xe2\x89\xa5\xe2\x89\xa5\xe2\x89\xa5 2\xe2\x80\xa2 Many database relationships are binaryEnrolledIncourseNumber nameCoursescreditsGPA addressIDfirstNameStudentslastName8Relationships and Relationship Setslength filmTypetitle yearMoviesname addressStarsStars-In9Multiplicity of Binary Relationships\xef\xbf\xbd EnrolledIn relationship between entity sets Student and Course is many-manyEnrolledIncourseNumber nameCoursescreditsGPA addressIDfirstNameStudentslastName10Multiplicity of Binary Relationships\xef\xbf\xbd In E/R diagrams, arrows can be used to indicate the multiplicity of a relationshipGivenBy\xef\xbf\xbd If a relationship is many-one from entity set Course to Department, we place an arrow entering Department \xef\xbf\xbd The arrow indicates that each entity in the entity set Course is related to at most one entity in the entity set Department \xef\xbf\xbd In this case, we may also say that the relationship from Department toCourse is one-many (also shown as 1-M). ID nameDepartmentsaddresscourseNumber nameCoursescredits11Multiplicity of Binary Relationshipslength filmTypetitle yearMoviesname addressStudiosOwns\xef\xbf\xbd The arrow indicates that each entity/tuple in relation Movie is \xe2\x80\x9crelated to\xe2\x80\x9d at most one entity in Studio\xef\xbf\xbd Owns relationship is one-many from Studio to Movie123Multiplicity of Binary Relationships\xef\xbf\xbd The relationship Chair between the entity sets Department and Professor is one-one, indicating which professor is the chair of which department. Note that this represents also the situation where a department  is assigned no chair. ChairDID nameDepartmentsaddressresearchArea addressIDfirstNameProfessorslastName13Multiplicity of Binary Relationshipsname addressPresidentsname addressStudiosRuns14Multiway Relationships\xef\xbf\xbd ODL (an OO notation which  we will introduce later) allows defining only binary relationships, i.e.,  relationships involving two classes.\xef\xbf\xbd In general, we need to represent n-ary (multi-way) relationships, i.e., relationships involving more than two entity sets\xef\xbf\xbd E/R model allows defining n-ary relationships conveniently. \xef\xbf\xbd An n-ary relationship in E/R is represented by a diamond connecting all entity sets involved.15Multiway Relationshipslength filmTypetitle yearMoviesname addressStarsname addressStudiosContracts16Attributes on Relationships\xef\xbf\xbd Consider EnrolledIn relationship between Student and Course\xef\xbf\xbd We may wish to record student\xe2\x80\x99s grade for this course\xef\xbf\xbd Where should it go?\xef\xbf\xbd Sometimes, it is more appropriate to associate attributes with a relationship rather than with the entity sets involvedEnrolledIncourseNumber nameCoursescreditsGPA addressIDfirstNameStudentslastNamegrade17Attributes on Relationshipslength filmTypetitle yearMoviesname addressStarsname addressStudiosContractssalary\xef\xbf\xbd Suppose we want to record the star\xe2\x80\x99s salary associated with this contract\xef\xbf\xbd Where should it go? 184Moving an attribute to an entity set\xef\xbf\xbd We could add an attribute(s) to a relationship\xef\xbf\xbd Alternatively, we could do the following: \xef\xbf\xbd invent a new entity set, whose entities have the attributes ascribed to the relationship\xef\xbf\xbd \xe2\x80\x9cconnect/include\xe2\x80\x9d this entity set in the relationship\xef\xbf\xbd omit the attribute from the relationship itself\xef\xbf\xbd Consider again the \xe2\x80\x9csalary\xe2\x80\x9d for the \xe2\x80\x9cContract\xe2\x80\x9d example:19Moving an attribute to an entity setletterGradeGradecourseNumber nameCoursescreditsGPA addressIDfirstNameStudentslastNameEnrolledIn20Moving an attribute to an entity setlength filmTypetitle yearMoviesname addressStarsname addressStudiosContractsamountSalaries21Roles in Relationships\xef\xbf\xbd It is possible that one entity set appears two or    more times in  a relationship\xef\xbf\xbd Suppose, we want to capture relationship  between two movies, one of which is the sequel of the other22Roles in Relationshipslength filmTypetitle yearMoviesSequel-ofOriginalSequelEach line to the entity set represents a different role that the entity set plays  in the relationship23PrerequisiteFollow-upRoles in RelationshipsPrereq-FollowEach line to the entity set represents a different role that the entity set plays in the relationshipcourseNumber nameCoursescredits245A more complex example\xef\xbf\xbd Suppose, each star is associated with exactly one studio\xef\xbf\xbd Supp. studio s1 of star a1 may further contract with another studio s2 to allow a1 to play in movie m2 made by studio s2length filmTypetitle yearMoviesname addressStarsname addressStudiosContractsProducing studioStudioof star25Converting n-ary relationship to binary\xef\xbf\xbd Any n-ary relationship R can be converted into a collection of M-1 binary relationships without loosingthe information represented by R\xef\xbf\xbd To do this:\xef\xbf\xbd Introduce a new entity set E, called connecting entity set,  whose entities might be thought of as tuples in R (the original n-ary relationship) \xef\xbf\xbd Introduce M-1 relationships from E to each one of the entity sets involved in R\xef\xbf\xbd If an entity set E plays more than one role, then E is the target of one relationship for each role26Converting n-ary relationship to binarylength filmTypetitle yearMovie name addressStarsname addressStudiosContractsMovie-ofProducing studioStudioof starStar-ofContractsProducing studioStudioof star27Converting n-ary relationship to binarylength filmTypetitle yearMovies name addressStarsname addressStudiosContractsMovie-ofProducing studioStudioof starStar-of28SupervisedByisaGradStudentsto ProfessorsoptionInheritance in E/R\xef\xbf\xbd Inheritance in E/R is expressed by isa relationship majorUgradStudentsisaGPA addressIDfirstNameStudentslastName29Inheritance in E/Rlength filmTypetitle yearMoviesweaponMurder-MysteryisaVoicesisaCartoonsto Stars306Inheritance in E/R\xef\xbf\xbd There is a subtle difference between the concept of inheritance in an OO approach and in E/R\xef\xbf\xbd In OO, an object must be a member of exactly one class\xef\xbf\xbd In E/R  \xef\xbf\xbd We consider an entity as having \xe2\x80\x9ccomponents\xe2\x80\x9d belonging to several entity sets that are \xe2\x80\x9cpart of\xe2\x80\x9d a single isa-hierarchy \xef\xbf\xbd The \xe2\x80\x9ccomponents\xe2\x80\x9d are connected into a single entity by the isarelationships \xef\xbf\xbd The entity has whatever attributes any of its components has, and participates in whatever relationships its components participate in\xef\xbf\xbd In an E/R diagram, we represent an entity set (e.g., CartoonMurderMystery) only if it has attributes and/or relationshipsof its own  31Constraints \xef\xbf\xbd There are some important aspects of the real world that cannot be represented using the ODL or E/R model introduced so far \xef\xbf\xbd The additional information about these aspects often takes the form of constraints on the data \xef\xbf\xbd Sometimes modeling this additional information goes beyond the structural and type constraints imposed by classes, entity sets, attributes, and relationships32A Classification of Constraints\xef\xbf\xbd A Key K is a set of attribute(s) that uniquely identifies an object within its class or an entity within its entity set R;   Defn: K \xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86 R.\xef\xbf\xbd That is, no two entities may agree in all their key values\xef\xbf\xbd Single-value constraints are requirements that the value in a certain context/role be unique. In addition to key constraints, there are other sources of single-value constraints (e.g., M:1 or 1:1 relationships, like a department\xe2\x80\x99s chair) \xef\xbf\xbd Referential integrity constraints are requirements that a value referred to by some object/entity must actually exist in the database; This means, no dangling pointers\xef\xbf\xbd Domain constraints require that the value of an attribute must be drawn from a specific set of values (called attribute domain), or lies within a specific range\xef\xbf\xbd General constraints \xe2\x80\x93 arbitrary assertions that must hold on the db33Keys\xef\xbf\xbd A superkey is a set of attributes whose values uniquely identify an entity (object) in the entity set (class); this set may not be minimal.\xef\xbf\xbd A minimal superkey is called a (candidate) key.\xef\xbf\xbd An entity set may have more than one candidate key. One of them is picked (by ?) as the primary key; others may be called alternates\xef\xbf\xbd In E/R, we underline the attributes forming a key of an entity set \xef\xbf\xbd No notation in E/R for alternate keysGPA addressIDfirstNameStudentslastNameHere, ID is the key of Student34Example\xef\xbf\xbd What should we consider as a key for Movie ?\xef\xbf\xbd title?\xef\xbf\xbd there could be different movies with the same name\xef\xbf\xbd {title, year}? \xef\xbf\xbd there still could be two movies with the same title made in the same year, but that\xe2\x80\x99s very unlikely as we understand!length filmTypetitle yearMovies {title, year} is a key for Movie35Example\xef\xbf\xbd What should be the key for Star = {name, address}?\xef\xbf\xbd name?\xef\xbf\xbd We may think that the name cannot serve to distinguish two people, but for stars, the names distinguish them, since traditionally they choose \xe2\x80\x9cstage names\xe2\x80\x9d as namesname addressStars {name} is the key for Star367Example\xef\xbf\xbd What should be considered as the key for Studio?\xef\xbf\xbd name?\xef\xbf\xbd It is \xe2\x80\x9creasonable\xe2\x80\x9d to assume that there are no studios with the same namesname addressStudios{name} is the key for Studio37Selecting Primary Key\xef\xbf\xbd Which of the three should be pick as the primary key?H EG MNDCBA Suppose candidate keys for E are :1. {A, B}2. {D, N}3. {G, M, N}38Selecting Primary Key\xef\xbf\xbd Some criteria to choose a primary key when there are alternate keys (i.e., more than one  candidate):\xef\xbf\xbd Total size of the attributes forming a key\xef\xbf\xbd Number of attributes forming a key\xef\xbf\xbd Convenience/Natural choice\xef\xbf\xbd A combination of the above39Single-Value Constraints\xef\xbf\xbd In E/R:\xef\xbf\xbd attributes are atomic (first normal form, 1NF)\xef\xbf\xbd an arrow (\xe2\x86\x92\xe2\x86\x92\xe2\x86\x92\xe2\x86\x92) can be used to express the multiplicity\xef\xbf\xbd What about multi-valued  or structured in E/R?No for attributes but Yes for relationships40Single-Value Constraints\xef\xbf\xbd Suppose A is a single-valued attribute.\xef\xbf\xbd Using the E/R model introduced so far, we can\xe2\x80\x99t:\xef\xbf\xbd Express that the value for A must be present (e.g., when A is the key or part of a key), or\xef\xbf\xbd Express that the value for A may be present(e.g., when A\xe2\x80\x99s value is optional, for which we use NULL)\xef\xbf\xbd If the choice is not explicit, we use the following \xe2\x80\x9cdefaults\xe2\x80\x9d:\xef\xbf\xbd The value for A must exist if A is part of the key\xef\xbf\xbd The value for A is optional, otherwise41Referential IntegrityConstraints\xef\xbf\xbd For relationships:\xef\xbf\xbd Single-value + Existence = Referential Integrity Constraint\xef\xbf\xbd We extend the arrow notation to indicate a reference is mandatory (to support referential integrity)GivenByID nameDepartmentsaddresscourseNumber nameCoursescredits\xef\xbf\xbd This means, there is no course listed in the database unless there is a department giving the course. 428RunsReferential IntegrityConstraints\xef\xbf\xbd The studio for a movie must always be present in Studio\xef\xbf\xbd If someone is a president, then the studio that he/she runs must exist in Studio\xef\xbf\xbd However, the model allows studios without presidents (temporarily) length filmTypetitle yearMoviesname addressStudiosname addressPresidentsOwns43Domain constraints\xef\xbf\xbd Domain constraints restrict the values of an attribute to be drawn from a set\xef\xbf\xbd E/R  does not support imposing domain constraints \xef\xbf\xbd ODL allows using types to limit/control possible values of the attributes\xef\xbf\xbd ODL does not support restricting the \xe2\x80\x9crange\xe2\x80\x9d of values allowed for an attribute44Relationship degree constraints\xef\xbf\xbd Relationship degree constraints (multiplicity) restrict the number of entities in the entity sets involved in a relationship\xef\xbf\xbd For example, we can impose a constraint that:a student cannot be enrolled in more that 5 courses\xef\xbf\xbd In E/R, we may attach a \xe2\x80\x9cbounding number\xe2\x80\x9d to the corresponding link\xef\xbf\xbd In ODL, a set of references or an array of size 5 (of reference type) will do\xe2\x89\xa4\xe2\x89\xa4\xe2\x89\xa4\xe2\x89\xa4 5EnrolledIncourseNumber nameCoursescreditsGPA addressIDfirstNameStudentslastName45Weak Entity / Relationship Sets: Example\xef\xbf\xbd Log records the transactions initiated through an ATM\xef\xbf\xbd Each transaction has a number, a date, and an amount\xef\xbf\xbd Different accounts might have transactions by the same number, on the same date, and for the same amountlogaccount# balanceAccountsnumberTransactionsamountdate46Weak Entity / Relationship Sets \xef\xbf\xbd A strong entity set has a key \xef\xbf\xbd A weak entity set does not have sufficient attributes of its own to form a key. It participates in a M-1 relationship (with no descriptive attributes) with a strong entity set\xef\xbf\xbd Discriminator of a weak entity set is a set of attributes that distinguishes among the entities corresponding to a strong entity\xef\xbf\xbd key of a weak entity set = key of the strong entity together with the discriminator of the weak entity\xef\xbf\xbd In E/R, these are represented by:47numberCrews Unit-ofAnother example\xef\xbf\xbd A movie studio may have several film crews\xef\xbf\xbd The crews in a studio may be designated as crew 1, crew 2, and so on\xef\xbf\xbd All studios use the same designations for crewsname addressStudios489numberSub-Crews Part-ofSources of Weak Entity Sets\xef\xbf\xbd Entity sets fall into a hierarchy\xef\xbf\xbd The entities in set Crew are sub-units of entities in set Studio\xe2\x80\xa2 The \xe2\x80\x9cnumbers\xe2\x80\x9d used for crew entities are not unique until we take into account the name of Studio with which she/he is associated (subordinate)\xef\xbf\xbd It is possible to have a chain of \xe2\x80\x9cweak\xe2\x80\x9d entity sets/relationshipsnumber name addressStudiosCrews Unit-of49Sources of Weak Entity Sets\xef\xbf\xbd Connecting entity sets (CES):\xef\xbf\xbd CES\xe2\x80\x99s  often have no attributes of their own\xef\xbf\xbd Their key is formed from the key attributes of the entity sets which they connect\xef\xbf\xbd A connecting entity set is always weak50Examplelength filmTypetitle yearMovies name addressStarsname addressStudiosContractsMovie-ofProducing studioStudioof starStar-ofsalary51Design Principles\xef\xbf\xbd Design should \xef\xbf\xbd Reflect the \xe2\x80\x9creality\xe2\x80\x9d we are trying to model \xe2\x80\x93 faithful/realistic\xef\xbf\xbd Avoid redundancy -- minimal\xe2\x80\xa2 Redundant information takes space\xe2\x80\xa2 Could cause inconsistency\xef\xbf\xbd Be as simple as possible\xef\xbf\xbd Be careful when choosing between using attributes and using classes or entity sets. Remember that:\xef\xbf\xbd An attribute is simpler to implement than a class/entity set or a relationship\xef\xbf\xbd If something has more information associated with it than just its name, it should probably be modeled as an entity set or a class52A  quick test!\xef\xbf\xbd Which of the following statements is NOT correct?A. A data model is a collection of concepts for describing data andtheir relationships. B. A data model is a language for describing the data semantics and the constraints. C. A data model is a language for expressing queries andtransactions over a database. D. A data model is an abstract representation of the structure of the data.53'