b'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMicrosoft PowerPoint - DB2.ppt [Compatibility Mode]\n\n\n1\n\nConceptual Database Design\n\nEntity/Relationship (E/R)  Model\n\n1\n\nDatabase Design\n\n\xef\xbf\xbd Requirements collection and analysis\n\n\xef\xbf\xbd Determine what information the database must hold\n\n\xef\xbf\xbd Determine the relationships among the components \n\nof that information\n\n\xef\xbf\xbdConceptual database design using some data model\n\n\xef\xbf\xbd A data model is a collection of concepts for describing:\n\n1. data and relationships among data \n\n2. data semantics and constraints\n\n2\n\nDesign Approaches & Notations\n\n\xef\xbf\xbd Entity-Relationship Model (E/R) \n\n\xef\xbf\xbd Object-Oriented  (e.g., Object Definition Language -- ODL)\n\n\xef\xbf\xbd Semi-structured data (e.g., XML)\n\nIdeas E/R Relations\nRelational\n\nDBMS\n\nA Design Process\n\n3\n\nEntity-Relationship (E/R) Model \n\n\xef\xbf\xbd E/R model (Chen 1976) is a graphical\n\nlanguage/notation to present a database model\n\n\xef\xbf\xbd It grew out of modeling applications\n\n\xef\xbf\xbd Widely used in conceptual database design\n\n\xef\xbf\xbd No single standard for the E/R language/notation\n\n4\n\nEntity-Relationship (E/R) Model\n\n\xef\xbf\xbd Collection of abstraction / modeling primitives\n\nEntity set\n\nRelationship set\n\nAttribute \nisa\n\nInheritance\n\nMultiplicity of relationships\n\nWeak entity set\n\nReferential integrity\n\nWeak relationship set\n\n5\n\nEntities and entity sets\n\n\xef\xbf\xbd Entity \xe2\x80\x93 A real world object that is \xe2\x80\x9cdistinguishable\xe2\x80\x9d from \nother objects\n\n\xef\xbf\xbd Entity Set -- A collection of similar entities\n\xef\xbf\xbd All entities in an entity set have the same set of attributes\n\n\xef\xbf\xbd In ODL:\n\xef\xbf\xbd Object corresponds to entity\n\xef\xbf\xbd Class corresponds to entity set\n\nGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName courseNumber name\n\nCourses\n\ncredits 6\n\n\n\n2\n\nEntities and entity sets\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStars\n\n7\n\nRelationships and Relationship Sets\n\n\xef\xbf\xbd Relationships are association among entities  \n\n\xef\xbf\xbd Relationship set is a set of relationships of the same type\n\xef\xbf\xbd If E1, . . ., En are entity sets, a relationship R on these sets is \ndefined as:  R \xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86 E1 \xc3\x97\xc3\x97\xc3\x97\xc3\x97 . . . \xc3\x97\xc3\x97\xc3\x97\xc3\x97 En\n\xe2\x80\xa2 In general, relationships are n-ary, where n \xe2\x89\xa5\xe2\x89\xa5\xe2\x89\xa5\xe2\x89\xa5 2\n\n\xe2\x80\xa2 Many database relationships are binary\n\nEnrolledIn\n\ncourseNumber name\n\nCourses\n\ncreditsGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\n8\n\nRelationships and Relationship Sets\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStarsStars-In\n\n9\n\nMultiplicity of Binary Relationships\n\n\xef\xbf\xbd EnrolledIn relationship between entity sets Student and \nCourse is many-many\n\nEnrolledIn\n\ncourseNumber name\n\nCourses\n\ncreditsGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\n10\n\nMultiplicity of Binary Relationships\n\n\xef\xbf\xbd In E/R diagrams, arrows can be used to indicate the multiplicity of a \n\nrelationship\n\nGivenBy\n\n\xef\xbf\xbd If a relationship is many-one from entity set Course to Department, we \nplace an arrow entering Department \n\n\xef\xbf\xbd The arrow indicates that each entity in the entity set Course is related to \nat most one entity in the entity set Department \n\n\xef\xbf\xbd In this case, we may also say that the relationship from Department to\nCourse is one-many (also shown as 1-M). \n\nID name\n\nDepartments\n\naddress\n\ncourseNumber name\n\nCourses\n\ncredits\n\n11\n\nMultiplicity of Binary Relationships\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStudiosOwns\n\n\xef\xbf\xbd The arrow indicates that each entity/tuple in relation Movie is \n\xe2\x80\x9crelated to\xe2\x80\x9d at most one entity in Studio\n\n\xef\xbf\xbd Owns relationship is one-many from Studio to Movie\n12\n\n\n\n3\n\nMultiplicity of Binary Relationships\n\n\xef\xbf\xbd The relationship Chair between the entity sets Department and \nProfessor is one-one, indicating which professor is the chair of \nwhich department. Note that this represents also the situation where \na department  is assigned no chair. \n\nChair\n\nDID name\n\nDepartments\n\naddress\nresearchArea address\n\nID\n\nfirstName\n\nProfessors\n\nlastName\n\n13\n\nMultiplicity of Binary Relationships\n\nname address\n\nPresidents\n\nname address\n\nStudiosRuns\n\n14\n\nMultiway Relationships\n\n\xef\xbf\xbd ODL (an OO notation which  we will introduce later) allows \ndefining only binary relationships, i.e.,  relationships involving \ntwo classes.\n\n\xef\xbf\xbd In general, we need to represent n-ary (multi-way) relationships, \ni.e., relationships involving more than two entity sets\n\n\xef\xbf\xbd E/R model allows defining n-ary relationships conveniently. \n\n\xef\xbf\xbd An n-ary relationship in E/R is represented by a diamond \nconnecting all entity sets involved.\n\n15\n\nMultiway Relationships\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\n16\n\nAttributes on Relationships\n\xef\xbf\xbd Consider EnrolledIn relationship between Student and Course\n\n\xef\xbf\xbd We may wish to record student\xe2\x80\x99s grade for this course\n\n\xef\xbf\xbd Where should it go?\n\n\xef\xbf\xbd Sometimes, it is more appropriate to associate attributes with a \nrelationship rather than with the entity sets involved\n\nEnrolledIn\n\ncourseNumber name\n\nCourses\n\ncreditsGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\ngrade\n\n17\n\nAttributes on Relationships\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nsalary\n\n\xef\xbf\xbd Suppose we want to record the star\xe2\x80\x99s salary associated \nwith this contract\n\n\xef\xbf\xbd Where should it go? 18\n\n\n\n4\n\nMoving an attribute to an entity set\n\n\xef\xbf\xbd We could add an attribute(s) to a relationship\n\n\xef\xbf\xbd Alternatively, we could do the following: \n\xef\xbf\xbd invent a new entity set, whose entities have the attributes \nascribed to the relationship\n\n\xef\xbf\xbd \xe2\x80\x9cconnect/include\xe2\x80\x9d this entity set in the relationship\n\n\xef\xbf\xbd omit the attribute from the relationship itself\n\n\xef\xbf\xbd Consider again the \xe2\x80\x9csalary\xe2\x80\x9d for the \xe2\x80\x9cContract\xe2\x80\x9d example:\n\n19\n\nMoving an attribute to an entity set\n\nletterGrade\n\nGrade\n\ncourseNumber name\n\nCourses\n\ncreditsGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\nEnrolledIn\n\n20\n\nMoving an attribute to an entity set\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\namount\n\nSalaries\n\n21\n\nRoles in Relationships\n\n\xef\xbf\xbd It is possible that one entity set appears two or    \nmore times in  a relationship\n\n\xef\xbf\xbd Suppose, we want to capture relationship  \nbetween two movies, one of which is the sequel of \nthe other\n\n22\n\nRoles in Relationships\n\nlength filmType\n\ntitle year\n\nMoviesSequel-of\n\nOriginal\n\nSequel\n\nEach line to the entity set represents a different role that the entity \n\nset plays  in the relationship\n23\n\nPrerequisite\n\nFollow-up\n\nRoles in Relationships\n\nPrereq-Follow\n\nEach line to the entity set represents a different role that \n\nthe entity set plays in the relationship\n\ncourseNumber name\n\nCourses\n\ncredits\n\n24\n\n\n\n5\n\nA more complex example\n\xef\xbf\xbd Suppose, each star is associated with exactly one studio\n\n\xef\xbf\xbd Supp. studio s1 of star a1 may further contract with another studio \ns2 to allow a1 to play in movie m2 made by studio s2\n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nProducing \n\nstudio\n\nStudio\n\nof star\n\n25\n\nConverting n-ary relationship to binary\n\xef\xbf\xbd Any n-ary relationship R can be converted into a \n\ncollection of M-1 binary relationships without loosing\nthe information represented by R\n\n\xef\xbf\xbd To do this:\n\xef\xbf\xbd Introduce a new entity set E, called connecting entity set,  \nwhose entities might be thought of as tuples in R (the original \n\nn-ary relationship) \n\n\xef\xbf\xbd Introduce M-1 relationships from E to each one of the entity sets \ninvolved in R\n\n\xef\xbf\xbd If an entity set E plays more than one role, then E is the target \nof one relationship for each role\n\n26\n\nConverting n-ary relationship to binary\n\nlength filmType\n\ntitle year\n\nMovie name address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nMovie-of\n\nProducing \n\nstudio\n\nStudio\n\nof star\n\nStar-of\n\nContracts\n\nProducing \n\nstudio\n\nStudio\n\nof star\n\n27\n\nConverting n-ary relationship to binary\n\nlength filmType\n\ntitle year\n\nMovies name address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nMovie-of\n\nProducing \n\nstudio\n\nStudio\n\nof star\n\nStar-of\n\n28\n\nSupervisedBy\n\nisa\n\nGradStudents\n\nto Professors\n\noption\n\nInheritance in E/R\n\n\xef\xbf\xbd Inheritance in E/R is expressed by isa relationship \n\nmajor\n\nUgradStudents\n\nisa\nGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\n29\n\nInheritance in E/R\n\nlength filmType\n\ntitle year\n\nMovies\n\nweapon\n\nMurder-\nMystery\n\nisa\n\nVoices\n\nisa\n\nCartoons\n\nto Stars\n\n30\n\n\n\n6\n\nInheritance in E/R\n\n\xef\xbf\xbd There is a subtle difference between the concept of inheritance in \nan OO approach and in E/R\n\n\xef\xbf\xbd In OO, an object must be a member of exactly one class\n\n\xef\xbf\xbd In E/R  \n\n\xef\xbf\xbd We consider an entity as having \xe2\x80\x9ccomponents\xe2\x80\x9d belonging to several \nentity sets that are \xe2\x80\x9cpart of\xe2\x80\x9d a single isa-hierarchy \n\n\xef\xbf\xbd The \xe2\x80\x9ccomponents\xe2\x80\x9d are connected into a single entity by the isa\nrelationships \n\n\xef\xbf\xbd The entity has whatever attributes any of its components has, and \nparticipates in whatever relationships its components participate in\n\n\xef\xbf\xbd In an E/R diagram, we represent an entity set (e.g., \n\nCartoonMurderMystery) only if it has attributes and/or relationships\n\nof its own  \n31\n\nConstraints \n\n\xef\xbf\xbd There are some important aspects of the real world that \n\ncannot be represented using the ODL or E/R model \n\nintroduced so far \n\n\xef\xbf\xbd The additional information about these aspects often takes \n\nthe form of constraints on the data \n\n\xef\xbf\xbd Sometimes modeling this additional information goes \n\nbeyond the structural and type constraints imposed by \n\nclasses, entity sets, attributes, and relationships\n\n32\n\nA Classification of Constraints\n\xef\xbf\xbd A Key K is a set of attribute(s) that uniquely identifies an object \nwithin its class or an entity within its entity set R;   Defn: K \xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86\xe2\x8a\x86 R.\n\xef\xbf\xbd That is, no two entities may agree in all their key values\n\n\xef\xbf\xbd Single-value constraints are requirements that the value in a \ncertain context/role be unique. In addition to key constraints, there \nare other sources of single-value constraints (e.g., M:1 or 1:1 \nrelationships, like a department\xe2\x80\x99s chair) \n\n\xef\xbf\xbd Referential integrity constraints are requirements that a value \nreferred to by some object/entity must actually exist in the database; \nThis means, no dangling pointers\n\n\xef\xbf\xbd Domain constraints require that the value of an attribute must be \ndrawn from a specific set of values (called attribute domain), or lies \nwithin a specific range\n\n\xef\xbf\xbd General constraints \xe2\x80\x93 arbitrary assertions that must hold on the db33\n\nKeys\n\xef\xbf\xbd A superkey is a set of attributes whose values uniquely identify an \n\nentity (object) in the entity set (class); this set may not be minimal.\n\n\xef\xbf\xbd A minimal superkey is called a (candidate) key.\n\n\xef\xbf\xbd An entity set may have more than one candidate key. One of them \n\nis picked (by ?) as the primary key; others may be called alternates\n\n\xef\xbf\xbd In E/R, we underline the attributes forming a key of an entity set \n\n\xef\xbf\xbd No notation in E/R for alternate keys\n\nGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\nHere, ID is the key of Student\n\n34\n\nExample\n\n\xef\xbf\xbd What should we consider as a key for Movie ?\n\n\xef\xbf\xbd title?\n\xef\xbf\xbd there could be different movies with the same name\n\n\xef\xbf\xbd {title, year}? \n\xef\xbf\xbd there still could be two movies with the same title made in the \nsame year, but that\xe2\x80\x99s very unlikely as we understand!\n\nlength filmType\n\ntitle year\n\nMovies {title, year} is a key for Movie\n\n35\n\nExample\n\n\xef\xbf\xbd What should be the key for Star = {name, address}?\n\n\xef\xbf\xbd name?\n\xef\xbf\xbd We may think that the name cannot serve to distinguish two \npeople, but for stars, the names distinguish them, since \ntraditionally they choose \xe2\x80\x9cstage names\xe2\x80\x9d as names\n\nname address\n\nStars {name} is the key for Star\n\n36\n\n\n\n7\n\nExample\n\n\xef\xbf\xbd What should be considered as the key for Studio?\n\n\xef\xbf\xbd name?\n\n\xef\xbf\xbd It is \xe2\x80\x9creasonable\xe2\x80\x9d to assume that there are no studios \n\nwith the same names\n\nname address\n\nStudios\n{name} is the key for Studio\n\n37\n\nSelecting Primary Key\n\n\xef\xbf\xbd Which of the three should be pick as the primary key?\n\nH E\n\nG M\nN\n\nD\n\nCBA Suppose candidate keys for E are :\n\n1. {A, B}\n\n2. {D, N}\n\n3. {G, M, N}\n\n38\n\nSelecting Primary Key\n\n\xef\xbf\xbd Some criteria to choose a primary key when there are \n\nalternate keys (i.e., more than one  candidate):\n\n\xef\xbf\xbd Total size of the attributes forming a key\n\n\xef\xbf\xbd Number of attributes forming a key\n\n\xef\xbf\xbd Convenience/Natural choice\n\n\xef\xbf\xbd A combination of the above\n\n39\n\nSingle-Value Constraints\n\n\xef\xbf\xbd In E/R:\n\n\xef\xbf\xbd attributes are atomic (first normal form, 1NF)\n\n\xef\xbf\xbd an arrow (\xe2\x86\x92\xe2\x86\x92\xe2\x86\x92\xe2\x86\x92) can be used to express the multiplicity\n\n\xef\xbf\xbd What about multi-valued  or structured in E/R?\n\nNo for attributes but Yes for relationships\n\n40\n\nSingle-Value Constraints\n\n\xef\xbf\xbd Suppose A is a single-valued attribute.\n\n\xef\xbf\xbd Using the E/R model introduced so far, we can\xe2\x80\x99t:\n\n\xef\xbf\xbd Express that the value for A must be present \n\n(e.g., when A is the key or part of a key), or\n\n\xef\xbf\xbd Express that the value for A may be present\n\n(e.g., when A\xe2\x80\x99s value is optional, for which we use NULL)\n\n\xef\xbf\xbd If the choice is not explicit, we use the following \xe2\x80\x9cdefaults\xe2\x80\x9d:\n\n\xef\xbf\xbd The value for A must exist if A is part of the key\n\n\xef\xbf\xbd The value for A is optional, otherwise\n\n41\n\nReferential IntegrityConstraints\n\n\xef\xbf\xbd For relationships:\n\xef\xbf\xbd Single-value + Existence = Referential Integrity Constraint\n\n\xef\xbf\xbd We extend the arrow notation to indicate a reference is \nmandatory (to support referential integrity)\n\nGivenBy\n\nID name\n\nDepartments\n\naddress\n\ncourseNumber name\n\nCourses\n\ncredits\n\n\xef\xbf\xbd This means, there is no course listed in the database unless there \nis a department giving the course. \n\n42\n\n\n\n8\n\nRuns\n\nReferential IntegrityConstraints\n\n\xef\xbf\xbd The studio for a movie must always be present in Studio\n\n\xef\xbf\xbd If someone is a president, then the studio that he/she runs must \nexist in Studio\n\n\xef\xbf\xbd However, the model allows studios without presidents (temporarily) \n\nlength filmType\n\ntitle year\n\nMovies\n\nname address\n\nStudios\n\nname address\n\nPresidentsOwns\n\n43\n\nDomain constraints\n\n\xef\xbf\xbd Domain constraints restrict the values of an attribute to \n\nbe drawn from a set\n\n\xef\xbf\xbd E/R  does not support imposing domain constraints \n\n\xef\xbf\xbd ODL allows using types to limit/control possible values of the \n\nattributes\n\n\xef\xbf\xbd ODL does not support restricting the \xe2\x80\x9crange\xe2\x80\x9d of values allowed \n\nfor an attribute\n\n44\n\nRelationship degree constraints\n\n\xef\xbf\xbd Relationship degree constraints (multiplicity) restrict the number \nof entities in the entity sets involved in a relationship\n\n\xef\xbf\xbd For example, we can impose a constraint that:\n\na student cannot be enrolled in more that 5 courses\n\xef\xbf\xbd In E/R, we may attach a \xe2\x80\x9cbounding number\xe2\x80\x9d to the corresponding link\n\n\xef\xbf\xbd In ODL, a set of references or an array of size 5 (of reference type) will do\n\n\xe2\x89\xa4\xe2\x89\xa4\xe2\x89\xa4\xe2\x89\xa4 5\nEnrolledIn\n\ncourseNumber name\n\nCourses\n\ncreditsGPA address\n\nID\n\nfirstName\n\nStudents\n\nlastName\n\n45\n\nWeak Entity / Relationship Sets: \n\nExample\n\n\xef\xbf\xbd Log records the transactions initiated through an ATM\n\n\xef\xbf\xbd Each transaction has a number, a date, and an amount\n\n\xef\xbf\xbd Different accounts might have transactions by the same \nnumber, on the same date, and for the same amount\n\nlog\n\naccount# balance\n\nAccounts\n\nnumber\n\nTransactions\n\namount\n\ndate\n\n46\n\nWeak Entity / Relationship Sets \n\xef\xbf\xbd A strong entity set has a key \n\n\xef\xbf\xbd A weak entity set does not have sufficient attributes of its \nown to form a key. It participates in a M-1 relationship \n(with no descriptive attributes) with a strong entity set\n\n\xef\xbf\xbd Discriminator of a weak entity set is a set of attributes \nthat distinguishes among the entities corresponding to a \nstrong entity\n\n\xef\xbf\xbd key of a weak entity set = key of the strong entity together \nwith the discriminator of the weak entity\n\n\xef\xbf\xbd In E/R, these are represented by:\n\n47\n\nnumber\n\nCrews Unit-of\n\nAnother example\n\n\xef\xbf\xbd A movie studio may have several film crews\n\n\xef\xbf\xbd The crews in a studio may be designated as \n\ncrew 1, crew 2, and so on\n\n\xef\xbf\xbd All studios use the same designations for crews\n\nname address\n\nStudios\n\n48\n\n\n\n9\n\nnumber\n\nSub-Crews Part-of\n\nSources of Weak Entity Sets\n\n\xef\xbf\xbd Entity sets fall into a hierarchy\n\xef\xbf\xbd The entities in set Crew are sub-units of entities in set Studio\n\n\xe2\x80\xa2 The \xe2\x80\x9cnumbers\xe2\x80\x9d used for crew entities are not unique until we \ntake into account the name of Studio with which she/he is \nassociated (subordinate)\n\n\xef\xbf\xbd It is possible to have a chain of \xe2\x80\x9cweak\xe2\x80\x9d entity sets/relationships\n\nnumber name address\n\nStudiosCrews Unit-of\n\n49\n\nSources of Weak Entity Sets\n\n\xef\xbf\xbd Connecting entity sets (CES):\n\n\xef\xbf\xbd CES\xe2\x80\x99s  often have no attributes of their own\n\n\xef\xbf\xbd Their key is formed from the key attributes of the entity \n\nsets which they connect\n\n\xef\xbf\xbd A connecting entity set is always weak\n\n50\n\nExample\n\nlength filmType\n\ntitle year\n\nMovies name address\n\nStars\n\nname address\n\nStudios\n\nContracts\n\nMovie-of\n\nProducing \nstudio\n\nStudio\n\nof star\n\nStar-ofsalary\n\n51\n\nDesign Principles\n\n\xef\xbf\xbd Design should \n\xef\xbf\xbd Reflect the \xe2\x80\x9creality\xe2\x80\x9d we are trying to model \xe2\x80\x93 faithful/realistic\n\n\xef\xbf\xbd Avoid redundancy -- minimal\n\n\xe2\x80\xa2 Redundant information takes space\n\n\xe2\x80\xa2 Could cause inconsistency\n\n\xef\xbf\xbd Be as simple as possible\n\n\xef\xbf\xbd Be careful when choosing between using attributes and \nusing classes or entity sets. Remember that:\n\xef\xbf\xbd An attribute is simpler to implement than a class/entity set or a \nrelationship\n\n\xef\xbf\xbd If something has more information associated with it than just its \nname, it should probably be modeled as an entity set or a class52\n\nA  quick test!\n\n\xef\xbf\xbd Which of the following statements is NOT correct?\n\nA. A data model is a collection of concepts for describing data and\n\ntheir relationships. \n\nB. A data model is a language for describing the data semantics \n\nand the constraints. \n\nC. A data model is a language for expressing queries and\n\ntransactions over a database. \n\nD. A data model is an abstract representation of the structure of \n\nthe data.\n\n53\n\n\n'